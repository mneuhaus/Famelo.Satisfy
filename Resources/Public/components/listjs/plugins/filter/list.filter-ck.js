List.prototype.plugins.filtering=function(e,t){var n=this,r=$("#"+n.listContainer.id),i={},s=function(){t=t||{};r.find('[data-filter="list"]').each(function(){var e=$(this),t=$("<ul></ul>");e.prepend(t);var r=e.attr("data-filter-property"),i=u.values(r).unique(),s=$("<li><a class='btn'>Alle</a></li>");t.append(s);for(var o=i.length-1;o>=0;o--){var a=i[o],s=$("<li><a class='btn'>"+a+"</a></li>");t.append(s)}e.find("a").click(function(){var e=$(this);n.filter(function(t){return t.values()[r]==e.text()||e.text()=="Alle"?!0:!1});return!1})});r.find('[data-filter="dropdown"]').each(function(){var e=$(this),t=$("<select></select>");e.prepend(t);var n=e.attr("data-filter-property"),r=u.values(n).unique(),s=$("<option value=''>Alle</option>");t.append(s);for(var a=r.length-1;a>=0;a--){var f=r[a];if(f!==""){var s=$("<option value='"+f+"'>"+f+"</option>");t.append(s)}}t.change(function(){i[n]=t.val().split(",");o()})});r.find("[data-filter-set]").live("click",function(){var e=$(this),t=e.attr("data-filter-set"),n=e.parents("[data-filter-property]").attr("data-filter-property");t==""?delete i[n]:i[n]=t.split(",");o()})},o=function(){n.filter(function(e){var t=!0;$.each(i,function(n,r){if(r.length==0||r[0]=="")return;r.indexOf(e.values()[n])==-1&&(t=!1)});return t})},u={values:function(e){var t=[];for(var r=n.items.length-1;r>=0;r--){var i=n.items[r];t.push(i.values()[e])}return t}};Array.prototype.unique=function(){var e={},t,n=this.length,r=[];for(t=0;t<n;t+=1)e[this[t]]=this[t];for(t in e)r.push(e[t]);return r};s();return this};